---
import Layout from '@/layouts/Layout.astro';
import CopyButton from '@/components/ui/CopyButton';
import CodeBlock from '@/components/ui/CodeBlock';
import PromptCard from '@/components/ui/PromptCard';
import QuickStart from '@/components/sections/QuickStart';
import QualitativeExamples from '@/components/sections/QualitativeExamples';
---

<Layout title="Test Copy Components">
  <main class="container mx-auto px-4 py-8 max-w-7xl">
    <h1 class="text-4xl font-bold mb-8">Copy Components Test Page</h1>

    <!-- Test CopyButton -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-4">CopyButton Component</h2>
      <div class="flex gap-4 items-center">
        <CopyButton client:load text="This is test text to copy" />
        <CopyButton client:load text="Small button" size="sm" />
        <CopyButton client:load text="Large button" size="lg" />
        <CopyButton client:load text="Inline variant" variant="inline" />
        <CopyButton client:load text="Floating variant" variant="floating" />
      </div>
    </section>

    <!-- Test CodeBlock -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-4">CodeBlock Component</h2>
      <CodeBlock
        client:load
        title="Example Python Code"
        language="python"
        code={`def verbalized_sampling(prompt, k=5, threshold=0.1):
    """Generate k responses with probabilities."""
    responses = generate_responses(prompt, k)
    filtered = [r for r in responses if r.prob >= threshold]
    return filtered`}
        showLineNumbers={true}
      />
    </section>

    <!-- Test PromptCard -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-4">PromptCard Component</h2>
      <div class="grid gap-6 md:grid-cols-2">
        <PromptCard
          client:load
          title="VS-Standard Prompt"
          description="Basic verbalized sampling prompt"
          prompt={`Generate 5 jokes about coffee with their probabilities.
Return JSON: {"candidates":[{"text":"...", "prob":0.28}, ...]}
Only include candidates with probability â‰¥ 0.1.`}
          variant="standard"
          parameters={{ k: 5, threshold: 0.1 }}
        />

        <PromptCard
          client:load
          title="VS-CoT Prompt"
          description="Chain-of-thought variant"
          prompt={`Think step-by-step about different joke styles.
Then generate 5 jokes with probabilities in JSON format.`}
          variant="cot"
          parameters={{ k: 5, threshold: 0.15, temperature: 0.8 }}
        />
      </div>
    </section>

    <!-- Test QuickStart Section -->
    <section class="mb-12 border-t pt-12">
      <QuickStart client:load />
    </section>

    <!-- Test QualitativeExamples Section -->
    <section class="mb-12 border-t pt-12">
      <QualitativeExamples client:load />
    </section>

    <!-- Test inline code with copy -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-4">Inline Code Examples</h2>
      <div class="prose prose-lg max-w-none">
        <p>
          Try this simple prompt:
          <code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded">
            Generate 5 responses with probabilities
          </code>
          <CopyButton client:load text="Generate 5 responses with probabilities" size="sm" variant="inline" />
        </p>
      </div>
    </section>
  </main>
</Layout>